function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function t(t){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?e(Object(o),!0).forEach((function(e){i(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function r(e,t,n){return t&&o(e.prototype,t),n&&o(e,n),e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?l(e):t}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,o=a(e);if(t){var r=a(this).constructor;n=Reflect.construct(o,arguments,r)}else n=o.apply(this,arguments);return f(this,n)}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,r=function(){};return{s:r,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function d(e){return Object.prototype.toString.call(e).replace(/\[object\s|\]/g,"")}function y(e){return"Object"===d(e)}function v(e){return"Array"===d(e)}function h(e){return"String"===d(e)}function m(e){var t=null;return/^[.|#]*[a-zA-Z-a-zA-Z]+$/.test(e)&&(t=document.querySelector(e)),t}function g(e){var t=null;return/^[.|#]*[a-zA-Z-a-zA-Z]+$/.test(e)&&(t=document.querySelectorAll(e)),t}function O(){for(var e=arguments.length,t=new Array(e),o=0;o<e;o++)t[o]=arguments[o];for(var r=function e(){n(this,e);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];var a,s=p(t);try{for(s.s();!(a=s.n()).done;){var l=a.value;b(this,new l(r))}}catch(e){s.e(e)}finally{s.f()}},i=0,a=t;i<a.length;i++){var s=a[i];b(r,s),b(r.prototype,s.prototype)}return r}function b(e,t){var n,o=p(Reflect.ownKeys(t));try{for(o.s();!(n=o.n()).done;){var r=n.value;if("constructor"!==r&&"prototype"!==r&&"name"!==r){var i=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(e,r,i)}}}catch(e){o.e(e)}finally{o.f()}}var w=function(){function e(){n(this,e)}return r(e,null,[{key:"initStyle",value:function(t,n){if(!t.hasOwnProperty("el")&&!t instanceof HTMLElement)throw new Error("Missing el attribute");var o=[];if(n&&n.hasOwnProperty("style")){if(t instanceof HTMLElement&&y(n.style))for(var r in n.style){var i=e.fmtStyle(r,n.style[r]);t.style.cssText+=i}}else if(o=t.el instanceof HTMLElement?t.el:g(t.el),t.hasOwnProperty("style")&&y(t.style))for(var a in t.style){var s=e.fmtStyle(a,t.style[a]);if(o instanceof HTMLElement){o.style.cssText+=s;break}var l,f=p(o);try{for(f.s();!(l=f.n()).done;){l.value.style.cssText+=s}}catch(e){f.e(e)}finally{f.f()}}return o}},{key:"fmtStyle",value:function(e,t){return e.replace(/[A-Z]+/,(function(e){return"-"+e.toLowerCase()}))+":"+t+";"}},{key:"globalStyle",value:function(t,n,o){var r="";for(var i in n)y(o)&&o.hasOwnProperty("style")&&o.style.hasOwnProperty(i)||(r+=e.fmtStyle(i,n[i]));t.style.cssText+=r}}]),e}(),E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,O(w));var o=c(i);function i(e,t){var r;return n(this,i),r=o.call(this),window?l(r)instanceof i?(i.opt={node:e,options:y(e)&&!y(t)?e:t||null,position:{}},y(e)&&y(t)&&(i.opt.options=Object.assign(i.opt.node,i.opt.options)),r):f(r,new i):f(r)}return r(i,[{key:"init",value:function(){var e,n=i.opt,o=t({open:!0,direction:["x","y"]},n.options);if(!n.node)throw new Error("Parameter error");if(v(n.options))throw new Error("options cannot be an array");var r=v(n.node)||v(n.node.el);if((n.node instanceof HTMLElement||r)&&(e=n.node),n.node.el instanceof HTMLElement&&(e=n.node.el),h(n.node)&&(e=m(n.node)),h(n.node.el)&&(e=m(n.node.el)),!e)throw new Error("If the first parameter is not a dom node, please configure the id or class name of the corresponding element of el");if(n.node=e,y(n.options)&&Object.getOwnPropertyNames(n.options).length)for(var a in o)n.options[a]=o[a];else n.options=o;i.singleTouch()}},{key:"updata",value:function(e){var n=t({open:!0,direction:["x","y"]},e),o=i.opt;e&&(o.options=n),o.hasOwnProperty("nodes")&&o.options.open&&i.clearEvent(o.nodes),i.singleTouch()}},{key:"stop",value:function(){i.opt.options.open=!1,i.singleTouch()}},{key:"start",value:function(){i.opt.options.open=!0,i.singleTouch()}},{key:"clearStyle",value:function(){var e=i.opt;if(v(e.node)){var t,n=p(e.nodes);try{for(n.s();!(t=n.n()).done;){t.value.style.cssText=""}}catch(e){n.e(e)}finally{n.f()}}else e.node.style.cssText=""}}],[{key:"singleTouch",value:function(){var e=i.opt;e.options.open?(i.scrollLeft=document.documentElement.scrollLeft,i.scrollTop=document.documentElement.scrollTop,window.addEventListener("scroll",P),e.hasOwnProperty("nodes")||v(e.node)||v(e.node.el)?i.dragList():i.openDrag()):(window.removeEventListener("scroll",P),e.hasOwnProperty("nodes")?i.clearEvent(e.nodes):e.node instanceof HTMLElement&&(e.node.removeEventListener("pointerdown",T),e.node.removeEventListener("pointerup",x),e.node.removeEventListener("pointermove",j)))}},{key:"clearEvent",value:function(e){var t,n=p(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;o.node.removeEventListener("pointerdown",T),o.node.removeEventListener("pointerup",x),o.node.removeEventListener("pointermove",j)}}catch(e){n.e(e)}finally{n.f()}}},{key:"dragList",value:function(){var e=i.opt;switch(v(e.node)?"nArray":"eArray"){case"nArray":e.nodes=i.getNodes(e.node,e);break;case"eArray":e.nodes=i.getNodes(e.node.el,e)}i.openDrags();for(var t=0;t<e.node.length;t++){var n=e.node[t],o=e.nodes[t];y(n)&&!n.open&&o.node.removeEventListener("pointerdown",T)}}},{key:"openDrags",value:function(){var e,t=p(i.opt.nodes);try{for(t.s();!(e=t.n()).done;){var n=e.value;n.node._params=n,n.node.addEventListener("pointerdown",T),n.node.addEventListener("pointerup",x)}}catch(e){t.e(e)}finally{t.f()}}},{key:"openDrag",value:function(){var e=i.opt;w.initStyle(e.node,e.options),e.node._params=e,e.node.addEventListener("pointerdown",T),e.node.addEventListener("pointerup",x)}},{key:"getNodes",value:function(e,t){for(var n=[],o={},r=0;r<e.length;r++){var a=void 0;if(a=e[r]instanceof HTMLElement?e[r]:y(e[r])?w.initStyle(e[r]):g(e[r]),"NodeList"===d(a)){var s,l=p(a);try{for(l.s();!(s=l.n()).done;){var f=s.value;i.addGlobalStyle(f,t,e[r]),o={node:f,direction:y(e[r])&&e[r].direction,position:{}},n.push(o)}}catch(e){l.e(e)}finally{l.f()}}else o={node:a,direction:y(e[r])&&e[r].direction,position:{}},i.addGlobalStyle(a,t,e[r]),n.push(o);o.direction||delete o.direction}return n}},{key:"addGlobalStyle",value:function(e,t,n){t.options.hasOwnProperty("style")&&w.globalStyle(e,t.options.style,n)}},{key:"getElementPoisition",value:function(e){return{left:e.getBoundingClientRect().left,right:e.getBoundingClientRect().right,top:e.getBoundingClientRect().top,bottom:e.getBoundingClientRect().bottom}}}]),i}();function P(){E.scrollLeft=document.documentElement.scrollLeft,E.scrollTop=document.documentElement.scrollTop}function L(e,t){if(!e.offsetParent||"body"===e.offsetParent.tagName.toLocaleLowerCase())return t.left+=e.offsetLeft,void(t.top+=e.offsetTop);t.left+=e.offsetLeft,t.top+=e.offsetTop,L(e.offsetParent,t)}function T(e){var t=E.getElementPoisition(this),n=t.left,o=t.top;this._params.position.eOfx=e.pageX-(E.scrollLeft+n),this._params.position.eOfy=e.pageY-(E.scrollTop+o),E.scrollWidth=document.documentElement.scrollWidth,E.scrollHeight=document.documentElement.scrollHeight;var r=this.offsetParent?getComputedStyle(this.offsetParent).position:null;if(r&&"static"!==r){var i={left:0,top:0};L(this.offsetParent,i),this._params.position.nodeOfx=this.offsetLeft+i.left,this._params.position.nodeOfy=this.offsetTop+i.top}else this._params.position.nodeOfx=this.offsetLeft,this._params.position.nodeOfy=this.offsetTop;this.addEventListener("pointermove",j),this.setPointerCapture(e.pointerId)}function x(e){this.removeEventListener("pointermove",j),this.releasePointerCapture(e.pointerId)}function j(e){var t,n,o,r=E.opt.options.direction,i=this._params,a=i.position,s=i.node,l=E.getElementPoisition(this),f=l.left,c=l.top+E.scrollTop,u=E.scrollWidth-s.offsetWidth+a.eOfx,p=E.scrollHeight-s.offsetHeight+a.eOfy;n=f<=0?e.pageX<=a.eOfx?a.eOfx:e.pageX:e.pageX>=u?u:e.pageX,o=c<=0?e.pageY<=a.eOfy?a.eOfy:e.pageY:e.pageY>=p?p:e.pageY,this._params.hasOwnProperty("direction")&&(this._params.direction,function(e){throw new TypeError('"'+e+'" is read-only')}("direction")),t=r&&r.indexOf("x")>=0&&r.indexOf("y")<0?"translateX(".concat(n-a.eOfx-a.nodeOfx,"px"):r&&r.indexOf("x")<0&&r.indexOf("y")>=0?"translateY(".concat(o-a.eOfy-a.nodeOfy,"px)"):"translate(".concat(n-a.eOfx-a.nodeOfx,"px,").concat(o-a.eOfy-a.nodeOfy,"px)"),this.style.transform=t}export default E;
